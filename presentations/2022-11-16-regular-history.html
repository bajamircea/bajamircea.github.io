---
layout: presentation
title: History of normal type in C++
---

Mircea Baja @ 16 November 2022

# History of normal type in C++

---
# Regular data as of C++20

```cpp
struct person
{
  std::string first_name;
  std::string last_name;
  int age{};

  constexpr std::strong_ordering
    operator<=>(const person &) const noexcept = default;
};
```

---
# Agenda

- struct from C
- C copy
- C++ constructor, destructor and class
- Default constructor
- C++ copy
- Exception safety, noexcept
- C++ equality and order (first attempt)
- Templates and STL
- C++ move rationale
- Rule of 3 and composing
- Regular syntax and semantics
- History of concepts in C++
- The many relations
- History of the three-way comparison, aka the spaceship operator
- Pragmatic Regular structs
- Regular wannabes
- The future of regular
- Efficiency and the things we know


---
# Struct from C

```cpp
struct sample
{
  int w; // 4 bytes
  char x; // 1 byte
  // 3 bytes of padding here
  int y; // 4 bytes
  char z; // 1 byte
  // 3 bytes of padding at the end
}; // takes overall 16 bytes
```

- padding can be reduced by sorting members by size
- such a type provides interpretation of memory

---
# Questions?

---
class: large-points

# Regular data concept (syntax)

- default constructible (noexcept)
- destructible (implicitly noexcept)
- copy constructor and assignment (can throw)
- move constructor and assignment (noexcept)
- equality (== and !=, noexcept, const)
- order (<, >, <=, >=, <=>, noexcept, const)

---
class: large-points

# Concept also has semantics

- "it's a data class"
- copy copies, move moves, etc.
- no resource/memory leaks
- copies are equal, substitutable
- "moved from" at least can be destroyed and assigned
- equality reflexive, symmetric, transitive
- != is literally "not equal"
- less than is strict total order
- trichotomy
- reasonable complexity of operations

---
